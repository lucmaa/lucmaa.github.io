<!DOCTYPE html>
<html lang="en">
  <head><meta charset="UTF-8"/>
<!-- hexo-inject:begin --><!-- hexo-inject:end --><meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">

<meta name="description" content="Windows Insider Program"/><meta name="keywords" content="wsl, Eureka" /><link rel="alternate" href="/default" title="Eureka"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=2.11.0" />
<link rel="canonical" href="https://lucmann.github.io/sys/windows-insider-program/"/>

<link rel="stylesheet" type="text/css" href="/lib/fancybox/jquery.fancybox.css" /><script type="text/x-mathjax-config">
    MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']] } });
  </script>
  <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<link rel="stylesheet" type="text/css" href="/css/style.css?v=2.11.0" />

<script id="baidu_push">
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<script>
  window.config = {"leancloud":{"app_id":null,"app_key":null},"toc":true,"fancybox":true,"pjax":"","latex":true};
</script>

    <title>Windows Insider Program - Eureka</title>
  <meta name="generator" content="Hexo 4.2.1"><!-- hexo-inject:begin --><!-- hexo-inject:end --></head>

  <body><div id="mobile-navbar" class="mobile-navbar">
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="mobile-header-logo">
    <a href="/." class="logo">Eureka</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list"><a href="/">
        <li class="mobile-menu-item">Home
          </li>
      </a><a href="/archives/">
        <li class="mobile-menu-item">Archives
          </li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags
          </li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories
          </li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About
          </li>
      </a></ul>
</nav>
<div class="container" id="mobile-panel">
      <header id="header" class="header"><div class="logo-wrapper">
  <a href="/." class="logo">Eureka</a>
</div>

<nav class="site-navbar"><ul id="menu" class="menu"><li class="menu-item">
          <a class="menu-item-link" href="/">
            Home
            </a>
        </li>
      <li class="menu-item">
          <a class="menu-item-link" href="/archives/">
            Archives
            </a>
        </li>
      <li class="menu-item">
          <a class="menu-item-link" href="/tags/">
            Tags
            </a>
        </li>
      <li class="menu-item">
          <a class="menu-item-link" href="/categories/">
            Categories
            </a>
        </li>
      <li class="menu-item">
          <a class="menu-item-link" href="/about/">
            About
            </a>
        </li>
      </ul></nav>
</header>

      <main id="main" class="main">
        <div class="content-wrapper">
          <div id="content" class="content"><article class="post">
    <header class="post-header">
      <h1 class="post-title">Windows Insider Program
        </h1>

      <div class="post-meta">
        <span class="post-time">
          2020-02-08
        </span><span class="post-category">
            <a href="/categories/sys/">sys</a>
            </span>
        </div>
    </header>

    <div class="post-content"><p>The story begins with debugging an OpenGL demo on the WSL with the Mesa libraries compiled by myself. Every time the executable will crash when it stops at the breakpoint and steps into the function. The gdb outputs as follows:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">Thread 1 <span class="string">"osdemo"</span> hit Breakpoint 1, OSMesaMakeCurrent (osmesa=0x8056bf0, buffer=0x7ffff85f0010, <span class="built_in">type</span>=5121, width=400, height=400)</span><br><span class="line">    at ../src/gallium/state_trackers/osmesa/osmesa.c:763</span><br><span class="line">763     &#123;</span><br><span class="line">(gdb) n</span><br><span class="line">The futex facility returned an unexpected error code.</span><br><span class="line">The futex facility returned an unexpected error code.</span><br><span class="line">The futex facility returned an unexpected error code.</span><br><span class="line">The futex facility returned an unexpected error code.</span><br><span class="line">The futex facility returned an unexpected error code.</span><br><span class="line">The futex facility returned an unexpected error code.</span><br><span class="line">The futex facility returned an unexpected error code.</span><br><span class="line">The futex facility returned an unexpected error code.</span><br><span class="line">The futex facility returned an unexpected error code.</span><br><span class="line">The futex facility returned an unexpected error code.</span><br><span class="line">The futex facility returned an unexpected error code.</span><br><span class="line">The futex facility returned an unexpected error code.</span><br><span class="line">The futex facility returned an unexpected error code.</span><br><span class="line">The futex facility returned an unexpected error code.</span><br><span class="line">The futex facility returned an unexpected error code.</span><br><span class="line">The futex facility returned an unexpected error code.</span><br><span class="line"></span><br><span class="line">Thread 13 <span class="string">"osdemo"</span> received signal SIGABRT, Aborted.</span><br><span class="line">[Switching to Thread 0x7fffe0f90700 (LWP 4073)]</span><br><span class="line">__GI_raise (sig=sig@entry=6) at ../sysdeps/unix/sysv/linux/raise.c:50</span><br><span class="line">50      ../sysdeps/unix/sysv/linux/raise.c: No such file or directory.</span><br><span class="line">(gdb) bt</span><br><span class="line"><span class="comment">#0  __GI_raise (sig=sig@entry=6) at ../sysdeps/unix/sysv/linux/raise.c:50</span></span><br><span class="line"><span class="comment">#1  0x00007ffffb485899 in __GI_abort () at abort.c:79</span></span><br><span class="line"><span class="comment">#2  0x00007ffffb4f009f in __libc_message (action=(do_abort | do_backtrace), fmt=0x7ffffb618fbe "%s", fmt=0x7ffffb618fbe "%s",</span></span><br><span class="line">    action=(do_abort | do_backtrace)) at ../sysdeps/posix/libc_fatal.c:181</span><br><span class="line"><span class="comment">#3  0x00007ffffb4f0440 in __GI___libc_fatal (message=message@entry=0x7ffffb405000 "The futex facility returned an unexpected error code.\n")</span></span><br><span class="line">    at ../sysdeps/posix/libc_fatal.c:191</span><br><span class="line"><span class="comment">#4  0x00007ffffb3fd34a in futex_fatal_error () at ../sysdeps/nptl/futex-internal.h:200</span></span><br><span class="line"><span class="comment">#5  futex_wake (private=&lt;optimized out&gt;, processes_to_wake=&lt;optimized out&gt;, futex_word=&lt;optimized out&gt;) at ../sysdeps/unix/sysv/linux/futex-internal.h:251</span></span><br><span class="line"><span class="comment">#6  __condvar_confirm_wakeup (private=&lt;optimized out&gt;, cond=&lt;optimized out&gt;) at pthread_cond_wait.c:55</span></span><br><span class="line"><span class="comment">#7  __pthread_cond_wait_common (abstime=0x0, clockid=0, mutex=0x806fad0, cond=0x806faf8) at pthread_cond_wait.c:425</span></span><br><span class="line"><span class="comment">#8  __pthread_cond_wait (cond=0x806faf8, mutex=0x806fad0) at pthread_cond_wait.c:638</span></span><br><span class="line"><span class="comment">#9  0x00007ffffc0be0cb in cnd_wait (mtx=0x806fad0, cond=0x806faf8) at ../include/c11/threads_posix.h:155</span></span><br><span class="line"><span class="comment">#10 lp_cs_tpool_worker (data=data@entry=0x806fad0) at ../src/gallium/drivers/llvmpipe/lp_cs_tpool.c:48</span></span><br><span class="line"><span class="comment">#11 0x00007ffffc0bdeab in impl_thrd_routine (p=&lt;optimized out&gt;) at ../include/c11/threads_posix.h:87</span></span><br><span class="line"><span class="comment">#12 0x00007ffffb3f6669 in start_thread (arg=&lt;optimized out&gt;) at pthread_create.c:479</span></span><br><span class="line"><span class="comment">#13 0x00007ffffb582323 in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:95</span></span><br></pre></td></tr></table></figure><br>I did not consider this crash as a WSL bug until I found this <a href="https://github.com/Microsoft/WSL/issues/3618" target="_blank" rel="noopener">issue</a> on the github. Then I realized that I had to update my WSL that is updated as the Windows is updated. The easy way to get the latest Windows build version is to register the <a href="https://insider.windows.com/zh-cn/" target="_blank" rel="noopener">Windows Insider Program</a> that only requires</p>
<ul>
<li>Windows 10</li>
<li>Microsoft Account</li>
</ul>
<p>Once you register successfully, you can check the Windows Updates for the latest Windows build.</p>
<img src="/sys/windows-insider-program/windows_update.png" class="" title="windows-updates">

      </div>
      
      <footer class="post-footer">
        <div class="post-tags">
            <a href="/tags/wsl/">wsl</a>
            </div>
        
        <nav class="post-nav"><a class="prev" href="/sys/debug-x11-with-tcpdump/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text nav-default">Debugging X11 with tcpdump</span>
        <span class="prev-text nav-mobile">Prev</span>
      </a>
    <a class="next" href="/lib/mesa/">
        <span class="next-text nav-default">Notes for Mesa</span>
        <span class="prev-text nav-mobile">Next</span>
        <i class="iconfont icon-right"></i>
      </a>
    </nav></footer>
    </article></div><div class="comments" id="comments"></div></div>
      </main>

      <footer id="footer" class="footer"><div class="social-links"><a href="mailto:lucmann@qq.com" class="iconfont icon-email" title="email"></a>
        <a href="https://github.com/lucmann" target="_blank" rel="noopener" class="iconfont icon-github" title="github"></a>
        <a href="/atom.xml" class="iconfont icon-rss" title="rss"></a>
    </div><script src='https://unpkg.com/mermaid@7.1.2/dist/mermaid.min.js'></script>
  <script>
    if (window.mermaid) {
      mermaid.initialize("");    
    }
  </script><div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/ahonn/hexo-theme-even" target="_blank" rel="noopener">Even</a>
  </span>

  <span class="copyright-year">&copy;2015 - 2021<span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">Luc</span>
  </span>
</div>
</footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div><script type="text/javascript" src="/lib/jquery/jquery.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout.js"></script>
  <script type="text/javascript" src="/lib/fancybox/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/src/even.js?v=2.11.0"></script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->
</body>
</html>
